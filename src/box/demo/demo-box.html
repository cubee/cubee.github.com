<!DOCTYPE html>
<html lang="zh">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>cubee 弹出框系列</title>
<script type="text/javascript" src="http://cn.yimg.com/i/yui/3.0.0/build/yui/yui-min.js"></script>
<style>
	body { font: 14px Georgia,"Times New Roman",Times,sans-serif; color: #444; }
	h1 { font-size: 26px; color: #00859D; font-family: Constantia,serif; }
	h3 { font-size: 14px; color: #555; margin: 20px 0 0; }
	code {font-family:"Courier New"}
</style>
</head>
<body  class="yui-skin-sam">
<h1>Cubee 弹出框控件 v0.1</h1>
<hr size=1 />
<p style="clear:both;">弹框的演示</p>
<button id="new">提示</button>
<button id="hide">隐藏</button>
<button id="show">显示</button><br />
<button id="confirm">confirm弹框</button>
<button id="nodraggable">不可拖拽弹框</button>
<button id="twobtn">双按钮弹框</button><br />
<button id="bigbox">巨大弹框</button>
<button id="diy">自定义弹框</button><br />
<button id="modal">带背景弹框</button>
<button id="unload">关闭的回调</button>
<button id="complex">复杂弹框 box</button>
<button id="antijam">隐藏干扰物box</button>
<br />
<button id="changeskin">更换皮肤sea</button>
<br />
<br />
<button id="close">关闭</button>
<hr size=1 />
<div>
<h4>干扰因素：</h4>
<div style="width:300px; float:left; margin-right:20px;">
文字文字文字文字文字文字文字文字文字文字文字文字文字文字<br />The Yahoo! User Interface (YUI) Library is a set of utilities and controls, written in JavaScript, for building richly interactive web applications using techniques such as DOM scripting, DHTML and AJAX.<br />
</div>
<div  style="width:300px; float:left; margin-right:20px;">
<object width="300" height="190" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000">
<param value="http://cn.yimg.com/a/yushiliu/668474_yahoo_homepage_r_336x190_080610c.swf" name="movie"/>
<param value="opaque" name="wmode"/>
<param value="true" name="loop"/>
<param value="high" name="quality"/>
<param value="always" name="allowScriptAccess"/>
<param value="clickTAG=http%3A%2F%2Fcn.rd.yahoo.com%2FSIG%3D14t3eiuhd%2FM%3D668474.12732661.13051778.10503457%2FD%3Dcnhome%2FS%3D2022275484%3AR%2FY%3DCN%2FEXP%3D1213160256%2FL%3D9GIrvcqlZs0KU.SlSBQeeABlyqVrZEhPPyAACme2%2FB%3DeyVIlMvR6B4-%2FJ%3D1213153056690867%2FA%3D5388068%2FR%3D0%2Fid%3Dflash_click%2FSIG%3D13kk7omfh%2F*http%3A%2F%2Fad.bitauto.com%3A80%2Fadsunion%2Flnk%2F%3Bik%3D4843651b2be8a%3Bpl%3Dpl-583-cvn%3B%2F%3Fhttp%3A%2F%2Fmarket.dyk.com.cn%2Feuro%2Ffestivaloil%2F" name="flashvars"/>
<embed width="300" height="190" allowscriptaccess="always" type="application/x-shockwave-flash" flashvars="clickTAG=http%3A%2F%2Fcn.rd.yahoo.com%2FSIG%3D14t3eiuhd%2FM%3D668474.12732661.13051778.10503457%2FD%3Dcnhome%2FS%3D2022275484%3AR%2FY%3DCN%2FEXP%3D1213160256%2FL%3D9GIrvcqlZs0KU.SlSBQeeABlyqVrZEhPPyAACme2%2FB%3DeyVIlMvR6B4-%2FJ%3D1213153056690867%2FA%3D5388068%2FR%3D0%2Fid%3Dflash_click%2FSIG%3D13kk7omfh%2F*http%3A%2F%2Fad.bitauto.com%3A80%2Fadsunion%2Flnk%2F%3Bik%3D4843651b2be8a%3Bpl%3Dpl-583-cvn%3B%2F%3Fhttp%3A%2F%2Fmarket.dyk.com.cn%2Feuro%2Ffestivaloil%2F" quality="high" wmode="opaque" loop="true" src="http://cn.yimg.com/a/yushiliu/668474_yahoo_homepage_r_336x190_080610c.swf"/>
</object>
</div>
<div style="width:300px; float:left; margin-right:20px;">
<object width="300" height="68" type="application/x-oleobject" standby="Loading Microsoft Windows Media Player components..." codebase="http://activex.microsoft.com/activex/controls/mplayer/en/nsmp2inf.cab#Version=6,4,5,715" classid="CLSID:22d6f312-b0f6-11d0-94ab-0080c74c7e95">
 <param value="http://c2.5474.com:81/song/40/14072/10.wma" name="FileName"/>
 <param value="1" name="ShowControls"/>
 <param value="0" name="ShowPositionControls"/>
 <param value="1" name="ShowAudioControls"/>
 <param value="1" name="ShowTracker"/>
 <param value="0" name="ShowDisplay"/>
 <param value="1" name="ShowStatusBar"/>
 <param value="0" name="AutoSize"/>
 <param value="0" name="ShowGotoBar"/>
 <param value="1" name="AutoStart"/>
 <param value="0" name="PlayCount"/>
 <param value="0" name="AnimationAtStart"/>
 <param value="0" name="TransparentAtStart"/>
 <param value="0" name="AllowScan"/>
 <param value="1" name="EnableContextMenu"/>
 <param value="0" name="ClickToPlay"/>
 <param value="1" name="InvokeURLs"/>
 <param value="datawindow" name="DefaultFrame"/>
 <embed width="300" height="68" border="0" align="bottom" defaultframe="datawindow" invokeurls="1" clicktoplay="0" enablecontextmenu="1" allowscan="1" transparentatstart="0" animationatstart="0" autorewind="0" autostart="1" showcaptioning="0" showgotobar="0" autosize="0" showstatusbar="1" showdisplay="0" showtracker="1" showaudiocontrols="1" showpositioncontrols="0" showcontrols="1" name="wmplayer" pluginspage="http://www.microsoft.com/isapi/redir.dll?prd=windows&sbp=mediaplayer&ar=media&sba=plugin&" type="application/x-mplayer2" src="http://c2.5474.com:81/song/40/14072/10.wma"/>
 </object>
 <br />
 <select style="width:100px;">
	<option>Select测试Select测试Select测试Select测试Select测试Select测试Select测试Select测试Select测试Select测试</option>
</select>
&nbsp;<input type="text" />
</div>
</div>
<hr style="clear:both;" size=1 />
<p style="clear:both">
<h3>API</h3>
<pre><code>
Y.Box：	
	说明：	窗口构造器，通过new Y.Box来render一个box，可以使用Y.Box定制自己的alert、comfirm、prompt等等
	使用：	new Y.Box(options);
	配置：	head:{string} box头部
		body:{string} box主题部分
		foot:{string} box尾部
		fixed:{boolean} true,box不会随着窗口滚动而滚动，false，box会随着窗口滚动而滚动，默认为true（ie6下始终会跟随页面滚动而滚动）
		afterDrag:{function} 拖拽结束的回调，参数为box本身
		draggable:{boolean} 是否可拖拽,默认为true
		resizeable:{boolean} 是否可resize，默认为false（未实现）
		afterResize:{function} resize结束的回调，参数为box，（未实现）
		shownImmediately:{boolean} 是否初始化完成立即显示，默认为true
		afterHide:{function} 隐藏完毕后的回调，参数为box
		afterShow:{function} 显示完成后的回调，参数为box
		onload:{function} 初始化完成后的回调，在render后立即执行，参数为box
		modal:{boolean} 是否带阴影，默认为false，阴影的动画效果未实现
		beforeUnload:{function} 窗口关闭之前的回调,参数为box
		afterUnload:{function} 窗口关闭之后的回调,参数为box
		antijam:{boolean} 是否隐藏media干扰物，默认为false
		maskOpacity:{float} 设定遮盖层的透明度，范围是[0,1]，默认为0.6，当modal为true时才起作用
	Y.Box的实例的方法：
		init:初始化，参数为options
		bringToTop:将box的z-index调到所有box之上
		render:渲染，init在new的时候调用，render可以在运行时任意时刻调用，参数为options，其成员可覆盖原参数
		close:关闭，并将窗口删除
		hide:隐藏，不会删除窗口
		show:显示窗口
		buildParam:构造配置项，在init的时候调用
		parseParam:重置配置项，在render的时候调用
		addMask:添加遮罩
		removeMask:删除遮罩
		hideMedias:隐藏media干扰物
		showMedias:解除media干扰物隐藏

Y.Box.alert：
	说明：	alert弹出框，基于Y.Box的一种定制
	使用：	Y.Box.alert(msg,callback,options)
	参数：	msg:{string} 消息体
		callback:{function} 点击确定的回调，参数为box，默认点击确定会关闭窗口
		options:{
			title:{string} 标题
			closeable:{boolean} 是否有关闭按钮，默认为true
			closeText:{string} 可以自定义按钮
			btnText:{string} 确定按钮的文案
			（其他字段同Y.Box的options）
		}
Y.Box.confirm：
	说明：	comfirm弹出框，基于Y.Box的一种定制
	使用：	Y.Box.confirm(msg,callback,options)
	参数：	msg:{string} 消息体
		callback:{function} 点击确定的回调，参数为box，默认点击确定会关闭窗口
		options:{
			title:{string} 标题
			yes:{function} 点击是的回调，参数为box，默认点击会关闭，此项会覆盖callback
			no:{function} 点击否的回调，参数为box
			yesText:{string} 按钮“是”的文案
			noText:{string} 按钮"否"的文案
			cancleBtn:{boolean} 是否显示"关闭"按钮，默认为true
			cancleText:{string} 按钮“取消”的文案
			（其他字段同Y.Box的options）
		}
</code></pre>
<hr size=1 />
<h3>Note</h3>
<ul>
	<li>基于YUI3-overlay</li>
	<li>可以通过扩展Y.Box来实现自定义弹框</li>
	<li>弹框默认宽度是300px，默认高度是auto，高度可以随着内容增多而变化，宽度不会变化</li>
	<li>弹框宽度设为auto的时候，在ie6下表现和其他A级浏览器不尽一致，因此不建议使用宽度auto配置</li>
	<li>皮肤需要在加载的时候作为box的子模块引入进来</li>
	<li>可以层叠多个弹框</li>
	<li>safari,opera下弹层默认无法遮盖media控件，chrome下弹层默认不完全遮盖media控件,可以通过配置antijam为true来隐藏media控件</li>
	<li>在ie6，ie7，firefox2,firefox3,opera9,safari4,chrome中测试通过</li>
</ul>
<p style="clear:both">
author:bachi@taobao.com（拔赤）
</p>

<!--link rel="stylesheet" type="text/css" href="skin/default.css"-->
<script>
<!--
YUI({
	combine:true,
	base:'http://cn.yimg.com/i/yui/3.0.0/build/', 
	root:"i/yui/3.0.0/build/",  
	comboBase:"http://cn.yimg.com/combo?", 
	charset:'utf-8',
	loadOptional:true,
	modules:{
		'box-skin-default':{//默认皮肤
			fullpath:'../skin/default.css',
			type:'css'
		},
		'box-skin-sea':{//另外一套皮肤
			fullpath:'../skin/sea.css',
			type:'css'
		},
		'box':{
			fullpath:'../box.js',
			requires:['box-skin-sea','node','overlay','dd-plugin']
		}
	}
}).use('box','console',function(Y){
	
	new Y.Console().render();
	box = null;
	/*
	var box = new Y.Box({
		head:'<span class="title">the title</span><a class="close">[x]</a>',
		body:'body',
		foot:'foot'
	}).render();
	*/
	Y.one("#new").on('click',function(e){
		e.halt();
		box = Y.Box.alert('哈哈哈',function(box){
			alert('点击ok');
			Y.log('点击ok');
		},{
			title:'title',
			draggable:true,
			afterDrag:function(box){
				Y.log('拖拽over');
			},
			afterShow:function(box){
				Y.log('显示over');
			},
			afterHide:function(box){
				Y.log('隐藏over');
			},
			onload:function(box){
				Y.log('初始化over');
			}
			
		});
	});
	Y.one("#confirm").on('click',function(e){
		e.halt();
		box = Y.Box.confirm('confirm',function(box){
			alert('点击yes');
			Y.log('点击yes');
		},{
			anim:false,
			title:'confirm title',
			no:function(box){
				alert('点击no');
				Y.log('点击no');	
			},
			cancleBtn:true,
			cancleTxt:'cancle',
			draggable:true,
			afterDrag:function(box){
				Y.log('拖拽confirm over');
			},
			afterShow:function(box){
				Y.log('显示comfirm over');
			},
			afterHide:function(box){
				Y.log('隐藏comfirm over');
			},
			onload:function(box){
				Y.log('初始化comfirm over');
			}
		});
	});
	Y.one("#close").on('click',function(e){
		e.halt();
		try{
			box.close();
		}catch(e){}
	});
	Y.one("#hide").on('click',function(e){
		e.halt();
		try{
			box.hide();
		}catch(e){}
	});
	Y.one("#show").on('click',function(e){
		e.halt();
		try{
			box.show();
		}catch(e){}
	});
	Y.one("#nodraggable").on('click',function(e){
		e.halt();
		box = Y.Box.alert('alert widthout draggable',null,{
			draggable:false	
		});
	});
	Y.one("#twobtn").on('click',function(e){
		e.halt();
		box = Y.Box.confirm('2 btns only',function(box){
			Y.log('2 btns confirm ok');
		},{
			title:'这里是标题',
			cancleBtn:false
		});
	});
	Y.one("#bigbox").on('click',function(e){
		e.halt();
		box = Y.Box.confirm('confirm',null,{
			width:'500px',
			height:'400px'
		});
	});
	Y.one("#diy").on('click',function(e){
		e.halt();
		box = new Y.Box({
			head:'diy box',
			body:'<a href="javascript:void(0);" id="pop">pop a new box</a><br /><a id="closemyself" href="#">close me</a>',
			foot:'author:bachi@taobao.com',
			onload:function(_box){
				Y.one("#closemyself").on('click',function(e){
					e.halt();
					_box.close();
				});
				Y.one("#pop").on('click',function(e){
					e.halt();
					box = Y.Box.alert('a new box',null,{
						height:'auto',
						width:'auto'
					});
				});
			}
		}).render();
	});
	Y.one("#modal").on('click',function(e){
		e.halt();
		box = Y.Box.alert('带阴影',null,{
			modal:true	
		});
		
	});
	Y.one("#changeskin").on('click',function(e){
		e.halt();
		if(/default/i.test(e.target.get('innerHTML'))){
			Y.Get.css('..//skin/sea.css?t='+Math.random());
			e.target.set('innerHTML','更换皮肤sea');
		}else{
			Y.Get.css('../skin/default.css?t='+Math.random());
			e.target.set('innerHTML','更换皮肤default');
		}
	});
	Y.one('#unload').on('click',function(e){
		e.halt();
		box = Y.Box.alert('点击确定或者点击x关闭窗口,或者点击按钮关闭',null,{
			beforeUnload:function(_box){
				alert('beforeunload fired!');
			}
			
		});
	});
	Y.one('#antijam').on('click',function(e){
		e.halt();
		box = Y.Box.alert('将media干扰物隐藏掉',null,{
			antijam:true
		});
	});
	Y.one("#complex").on('click',function(e){
		e.halt();
		box = Y.Box.alert('<iframe frameborder=0 border=0 height="100%" width="100%" src="http://www.google.com"></iframe>',null,{
			width:"600px",
			height:"500px"
			
		});
		
	});
	
});


//-->
</script>

</body>
</html>
